import{a as G}from"./chunk-GGPG3CNO.js";import{Aa as F,B as h,Ba as E,C as m,Ca as W,D as i,E as a,F as y,Fa as B,Fb as H,Gb as A,Ha as N,J as M,Jb as D,K as S,Nb as R,S as C,W as c,X as u,Y as w,ab as O,hb as k,ib as j,j as d,ja as v,k as l,pb as z,r as n,s as P,sa as I,u as _,ub as L,vb as q,ya as T,za as V}from"./chunk-GOUZPZED.js";import"./chunk-L2GIMNSN.js";import"./chunk-7KGURMOZ.js";import"./chunk-YZINE4VV.js";import"./chunk-OITPVWB3.js";import"./chunk-YXCBSPVC.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-ETCIABSX.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as b}from"./chunk-RW4GY4BD.js";var ee=(()=>{let s=class s{constructor(r,o){this.router=r,this.toastController=o,this.password="",this.newPassword="",this.confirmPassword="",this.formSubmitted=!1}ngOnInit(){}get formInvalid(){return!this.password||!this.newPassword||!this.confirmPassword}cambiarPass(){if(this.formSubmitted=!0,this.formInvalid)return;if(this.newPassword!==this.confirmPassword){alert("Las contrase\xF1as no coinciden");return}let r=localStorage.getItem("accessToken");if(!r){console.log("No se encontr\xF3 el token de acceso");return}let o=G.apiUrl+"/usuario/actualizarPassword";fetch(o,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({password:this.password,newPassword:this.newPassword})}).then(e=>e.text()).then(e=>{e.trim()==="Contrase\xF1a actualizada"?(this.presentToast("Contrase\xF1a actualizada"),this.router.navigate(["/ajustes"])):this.presentToast("Error: "+e)}).catch(e=>{console.error("Error en la solicitud:",e),alert("Error en la solicitud")})}presentToast(r){return b(this,null,function*(){yield(yield this.toastController.create({message:r,duration:2e3,position:"top"})).present()})}};s.\u0275fac=function(o){return new(o||s)(P(I),P(D))},s.\u0275cmp=_({type:s,selectors:[["app-cambiar-password"]],decls:18,vars:13,consts:[["registerForm","ngForm"],[3,"translucent"],["slot","start"],["defaultHref","/ajustes"],[3,"fullscreen"],[1,"centrar"],[1,"cambiarPass",3,"ngSubmit"],["type","password","placeholder","Contrase\xF1a","name","password","required","",3,"ngModelChange","ngModel"],["type","password","placeholder","Contrase\xF1a nueva","name","newPassword","required","",3,"ngModelChange","ngModel"],["type","password","placeholder","Confirmar contrase\xF1a","name","confirmPassword","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"boton-cambiar"]],template:function(o,e){if(o&1){let p=M();i(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),y(3,"ion-back-button",3),a(),i(4,"ion-title"),C(5,"Cambiar contrase\xF1a"),a()()(),i(6,"ion-content",4)(7,"div",5)(8,"form",6,0),S("ngSubmit",function(){return d(p),l(e.cambiarPass())}),i(10,"ion-item")(11,"ion-input",7),w("ngModelChange",function(t){return d(p),u(e.password,t)||(e.password=t),l(t)}),a()(),i(12,"ion-item")(13,"ion-input",8),w("ngModelChange",function(t){return d(p),u(e.newPassword,t)||(e.newPassword=t),l(t)}),a()(),i(14,"ion-item")(15,"ion-input",9),w("ngModelChange",function(t){return d(p),u(e.confirmPassword,t)||(e.confirmPassword=t),l(t)}),a()(),i(16,"ion-button",10),C(17," Cambiar contrase\xF1a "),a()()()()}o&2&&(h("translucent",!0),n(6),h("fullscreen",!0),n(4),m("invalid",!e.password&&e.formSubmitted),n(),c("ngModel",e.password),n(),m("invalid",!e.newPassword&&e.formSubmitted),n(),c("ngModel",e.newPassword),n(),m("invalid",!e.confirmPassword&&e.formSubmitted),n(),c("ngModel",e.confirmPassword),n(),m("disabled",e.formInvalid))},dependencies:[z,L,H,A,v,N,W,T,V,B,E,F,q,k,R,O,j],styles:[".cambiarPass[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px;padding-top:20px}.boton-cambiar[_ngcontent-%COMP%]{padding:20px}.invalid[_ngcontent-%COMP%]{border:2px solid red;--ion-color: red}.error-text[_ngcontent-%COMP%]{color:red;font-size:14px;text-align:center;margin-top:5px}.disabled[_ngcontent-%COMP%]{pointer-events:auto}"]});let g=s;return g})();export{ee as CambiarPasswordPage};
