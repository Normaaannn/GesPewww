import{a as N}from"./chunk-OOJV66GW.js";import"./chunk-DIOT67RP.js";import"./chunk-T5ABTVR2.js";import"./chunk-EIUGSWZD.js";import"./chunk-TW6IKH4B.js";import"./chunk-ZWHDOK3R.js";import"./chunk-4PGTP63H.js";import"./chunk-BDVXA75T.js";import"./chunk-HC6MZPB3.js";import"./chunk-I3LG7LOT.js";import"./chunk-FERD25SW.js";import"./chunk-7EU7YSXT.js";import"./chunk-LEIMCQKJ.js";import"./chunk-KKMBB4JE.js";import"./chunk-BZ2JL7UE.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-GZWEEWZ4.js";import"./chunk-MCRJI3T3.js";import"./chunk-MAJNWM2K.js";import"./chunk-5LUBTVRJ.js";import{a as j}from"./chunk-GGPG3CNO.js";import{Ab as V,B as m,Bb as $,D as i,E as o,F as h,J as g,K as f,Kb as H,L as b,La as M,Lb as B,S as r,T as v,U as p,V as P,W as S,aa as x,ba as C,ga as A,j as d,k as u,ka as I,la as D,r as l,s as E,tb as y,u as T,ua as w,xb as F,y as _,yb as k,zb as O}from"./chunk-37LTOCVS.js";import"./chunk-L2GIMNSN.js";import"./chunk-7KGURMOZ.js";import"./chunk-YZINE4VV.js";import"./chunk-OITPVWB3.js";import"./chunk-YXCBSPVC.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-ETCIABSX.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-RW4GY4BD.js";function z(s,c){if(s&1){let n=g();i(0,"ion-item",6),f("click",function(){let a=d(n).$implicit,e=b();return u(e.goToPedidoDetalle(a))}),i(1,"ion-label")(2,"p"),r(3),o(),i(4,"p"),r(5),x(6,"number"),o()()()}if(s&2){let n=c.$implicit;m("button",!0),l(3),S("Pedido #",n.id,"\xA0\xA0 Cliente: ",n.cliente.nombre," ",n.cliente.apellidos,""),l(2),p("Total: ",C(6,5,n.total,"1.2-2")," \u20AC")}}function G(s,c){if(s&1){let n=g();i(0,"ion-item",6),f("click",function(){let a=d(n).$implicit,e=b();return u(e.goToClienteDetalle(a))}),i(1,"ion-label")(2,"p"),r(3),o(),i(4,"p"),r(5),o()()()}if(s&2){let n=c.$implicit;m("button",!0),l(3),P("",n.nombre," ",n.apellidos,""),l(2),p("Ciudad: ",n.ciudad,"")}}function J(s,c){if(s&1){let n=g();i(0,"ion-item",6),f("click",function(){let a=d(n).$implicit,e=b();return u(e.goToProductoDetalle(a))}),i(1,"ion-label")(2,"p"),r(3),o(),i(4,"p"),r(5),o(),i(6,"p"),r(7),x(8,"number"),o()()()}if(s&2){let n=c.$implicit;m("button",!0),l(3),v(n.nombre),l(2),p("Descripci\xF3n: ",n.descripcion,""),l(2),p("Precio bruto: ",C(8,4,n.precioBruto,"1.2-2")," \u20AC")}}var Z=(()=>{let c=class c{constructor(t){this.router=t,this.mesAnioActual="",this.total=0,this.pedidos=[],this.clientes=[],this.productos=[]}ionViewWillEnter(){this.mesAnioActual=this.obtenerMesAnioActual(),this.obtenerTresUltimos()}obtenerMesAnioActual(){let t=new Date,e=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][t.getMonth()],U=t.getFullYear();return`${e} ${U}`}obtenerTresUltimos(){let t=localStorage.getItem("accessToken");if(!t){console.log("No se encontr\xF3 el token de acceso");return}let a=j.apiUrl+"/misc/datosHome";fetch(a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}).then(e=>{if(!e.ok)throw new Error("Error en la solicitud");return e.json()}).then(e=>{console.log("Respuesta completa:",e),e?(this.total=e.total||0,this.pedidos=e.pedidos||[],this.clientes=e.clientes||[],this.productos=e.productos||[],console.log("Pedidos:",this.pedidos),console.log("Clientes:",this.clientes),console.log("Productos:",this.productos)):console.warn("Datos vac\xEDos o inesperados:",e)}).catch(e=>{console.error("Error al obtener los datos:",e)})}goToPedidoDetalle(t){this.router.navigate(["/pedido-detalle"],{state:{pedidoId:t.id,pedidoFecha:t.fechaEmision,cliente:t.cliente,usuarioCreador:t.usuarioCreador.username}})}goToClienteDetalle(t){this.router.navigate(["/cliente-detalle"],{state:{cliente:t}})}goToProductoDetalle(t){this.router.navigate(["/producto-detalle"],{state:{producto:t}})}};c.\u0275fac=function(a){return new(a||c)(E(w))},c.\u0275cmp=T({type:c,selectors:[["app-home"]],decls:33,vars:10,consts:[[3,"translucent"],[3,"fullscreen"],[1,"centrar"],[2,"margin-bottom","30px"],[2,"margin-bottom","20px"],[3,"button","click",4,"ngFor","ngForOf"],[3,"click","button"]],template:function(a,e){a&1&&(i(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title")(3,"b"),r(4,"GesPe"),o()()()(),i(5,"ion-content",1)(6,"div",2)(7,"div",3)(8,"h1")(9,"b"),r(10),o()(),i(11,"h3")(12,"b"),r(13,"Total facturado este mes"),h(14,"br"),r(15),x(16,"number"),o()()(),i(17,"div")(18,"h5"),r(19,"\xDAltimos pedidos"),o(),i(20,"ion-list",4),_(21,z,7,8,"ion-item",5),o(),i(22,"h5"),r(23,"\xDAltimos clientes"),o(),i(24,"ion-list",4),_(25,G,6,4,"ion-item",5),o(),i(26,"h5"),r(27,"\xDAltimos productos"),o(),i(28,"ion-list"),_(29,J,9,7,"ion-item",5),o()()(),h(30,"br"),o(),i(31,"ion-footer"),h(32,"app-tabs"),o()),a&2&&(m("translucent",!0),l(5),m("fullscreen",!0),l(5),v(e.mesAnioActual),l(5),p(" ",C(16,7,e.total,"1.2-2")," \u20AC"),l(6),m("ngForOf",e.pedidos),l(4),m("ngForOf",e.clientes),l(4),m("ngForOf",e.productos))},dependencies:[y,k,H,B,D,A,I,M,N,F,$,O,V],styles:["h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{padding-left:10px}"]});let s=c;return s})();export{Z as HomePage};
