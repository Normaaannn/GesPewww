import{a as q}from"./chunk-KX3QT6RN.js";import{B as h,Ba as V,C as v,Ca as y,D as o,Da as M,E as s,Ea as R,Fa as k,Ia as E,J as w,K as c,Kb as L,La as x,Lb as j,Ob as A,S as m,Sb as W,X as P,Y as C,Z as I,j as n,k as a,la as S,lb as F,r as d,s as f,tb as N,u as b,ua as T,yb as O,zb as D}from"./chunk-37LTOCVS.js";import"./chunk-L2GIMNSN.js";import"./chunk-7KGURMOZ.js";import"./chunk-YZINE4VV.js";import"./chunk-OITPVWB3.js";import"./chunk-YXCBSPVC.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-ETCIABSX.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as _}from"./chunk-RW4GY4BD.js";var X=(()=>{let r=class r{constructor(e,i){this.router=e,this.toastController=i,this.email="",this.formSubmitted=!1,this.emailValid=!1}ngOnInit(){}isEmailValid(){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)}validateEmail(){this.emailValid=this.isEmailValid()}get formInvalid(){return!this.emailValid}recoverPass(){this.formSubmitted=!0,!this.formInvalid&&fetch(q.apiUrl+"/usuario/forgot-password",{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"},body:JSON.stringify({email:this.email})}).then(e=>e.text()).then(e=>{e.trim()==="Link de recuperaci\xF3n enviado"?(this.presentToast("Link de recuperaci\xF3n enviado a tu correo electr\xF3nico"),this.redirigirADespuesDe2Segundos()):this.presentToast(e)}).catch(e=>{console.error("Error en la solicitud:",e),alert("Error en la solicitud")})}goToLogin(){this.router.navigate(["/login"])}goToReset(){this.router.navigate(["/reset-password"])}redirigirADespuesDe2Segundos(){setTimeout(()=>{this.router.navigate(["/login"])},2e3)}presentToast(e){return _(this,null,function*(){yield(yield this.toastController.create({message:e,duration:2e3,position:"top",cssClass:"toast"})).present()})}};r.\u0275fac=function(i){return new(i||r)(f(T),f(A))},r.\u0275cmp=b({type:r,selectors:[["app-recover-password"]],decls:16,vars:7,consts:[["registerForm","ngForm"],[3,"translucent"],[3,"fullscreen"],[1,"centrar"],[1,"recoverPass",3,"ngSubmit"],["type","email","placeholder","Correo electr\xF3nico","name","email","label","Correo electr\xF3nico","labelPlacement","floating","required","",3,"ngModelChange","ionInput","ngModel"],["expand","block","type","submit",1,"boton-cambiar"],["expand","block",3,"click"],["expand","block",2,"padding-top","20px",3,"click"]],template:function(i,t){if(i&1){let l=w();o(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),m(3,"Recuperar contrase\xF1a"),s()()(),o(4,"ion-content",2)(5,"div",3)(6,"form",4,0),c("ngSubmit",function(){return n(l),a(t.recoverPass())}),o(8,"ion-item")(9,"ion-input",5),I("ngModelChange",function(g){return n(l),C(t.email,g)||(t.email=g),a(g)}),c("ionInput",function(){return n(l),a(t.validateEmail())}),s()(),o(10,"ion-button",6),m(11,"Recuperar contrase\xF1a"),s(),o(12,"ion-button",7),c("click",function(){return n(l),a(t.goToLogin())}),m(13,"Cancelar"),s(),o(14,"ion-button",8),c("click",function(){return n(l),a(t.goToReset())}),m(15,"Introducir token"),s()()()()}i&2&&(h("translucent",!0),d(4),h("fullscreen",!0),d(4),v("invalid",(!t.email||!t.isEmailValid())&&t.formSubmitted),d(),P("ngModel",t.email),d(),v("disabled",t.formInvalid))},dependencies:[N,O,L,j,S,x,k,V,y,E,R,M,F,D,W],styles:[".recoverPass[_ngcontent-%COMP%]{padding-top:20px;padding-left:20px;padding-right:20px}.invalid[_ngcontent-%COMP%]{border:2px solid red;--ion-color: red}.error-text[_ngcontent-%COMP%]{color:red;font-size:14px;text-align:center;margin-top:5px}.disabled[_ngcontent-%COMP%]{pointer-events:auto}"]});let u=r;return u})();export{X as RecoverPasswordPage};
