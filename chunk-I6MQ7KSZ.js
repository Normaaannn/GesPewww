import{c as H,e as z,h as U,i as G,j as J,k as K,m as Q,n as X,p as Y}from"./chunk-QA2ZZ3BP.js";import"./chunk-EIUGSWZD.js";import"./chunk-TW6IKH4B.js";import"./chunk-ZWHDOK3R.js";import"./chunk-4PGTP63H.js";import"./chunk-BDVXA75T.js";import"./chunk-HC6MZPB3.js";import"./chunk-I3LG7LOT.js";import"./chunk-FERD25SW.js";import"./chunk-7EU7YSXT.js";import"./chunk-LEIMCQKJ.js";import"./chunk-KKMBB4JE.js";import"./chunk-BZ2JL7UE.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-GZWEEWZ4.js";import"./chunk-MCRJI3T3.js";import"./chunk-MAJNWM2K.js";import"./chunk-5LUBTVRJ.js";import{a as j}from"./chunk-GGPG3CNO.js";import{Aa as v,B as P,Ba as T,C as m,Ca as W,D as o,Da as E,E as r,Ga as A,Hb as L,Ia as k,Ib as O,J as w,K as f,Lb as D,Pb as R,S as _,X as p,Y as g,Z as c,ib as F,j as a,k as l,ka as S,qb as B,r as n,s as b,ta as I,u as y,vb as N,wb as q,za as V}from"./chunk-WQB6777H.js";import"./chunk-L2GIMNSN.js";import"./chunk-7KGURMOZ.js";import"./chunk-YZINE4VV.js";import"./chunk-OITPVWB3.js";import"./chunk-YXCBSPVC.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-ETCIABSX.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as M}from"./chunk-RW4GY4BD.js";var me=(()=>{let h=class h{constructor(u,t){this.router=u,this.toastController=t,this.nombre="",this.apellidos="",this.nif="",this.email="",this.telefono="",this.direccion="",this.ciudad="",this.codigoPostal="",this.pais="",this.emailValid=!1,this.formSubmitted=!1}ngOnInit(){}isEmailValid(){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)}validateEmail(){this.emailValid=this.isEmailValid()}get formInvalid(){return!this.nombre||!this.apellidos||!this.nif||!this.email||!this.emailValid||!this.telefono||!this.direccion||!this.ciudad||!this.codigoPostal||!this.pais}addCliente(){if(this.formSubmitted=!0,this.formInvalid)return;let u=localStorage.getItem("accessToken");if(!u){console.log("No se encontr\xF3 el token de acceso");return}fetch(j.apiUrl+"/cliente",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({nombre:this.nombre,apellidos:this.apellidos,email:this.email,nif:this.nif,telefono:this.telefono,direccion:this.direccion,ciudad:this.ciudad,codigoPostal:this.codigoPostal,pais:this.pais})}).then(t=>t.text()).then(t=>{t.trim()==="Cliente a\xF1adido"?this.router.navigate(["/clientes"]):this.presentToast("Error en el registro: "+t)}).catch(t=>{console.error("Error en la solicitud:",t),alert("Error en la solicitud")})}cancelar(){this.router.navigate(["/clientes"])}presentToast(u){return M(this,null,function*(){yield(yield this.toastController.create({message:u,duration:2e3,position:"top"})).present()})}};h.\u0275fac=function(t){return new(t||h)(b(I),b(D))},h.\u0275cmp=y({type:h,selectors:[["app-cliente-add"]],decls:30,vars:31,consts:[["clienteForm","ngForm"],[3,"translucent"],[3,"fullscreen"],[1,"centrar"],[1,"addCliente",3,"ngSubmit"],["type","text","placeholder","Nombre","name","nombre","label","Nombre","labelPlacement","stacked","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Apellidos","name","apellidos","label","Apellidos","labelPlacement","stacked","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","NIF","name","nif","label","NIF","labelPlacement","stacked","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Correo electr\xF3nico","name","email","label","Email","labelPlacement","stacked","required","",3,"ngModelChange","ionInput","ngModel"],["type","text","placeholder","Tel\xE9fono","name","telefono","label","Tel\xE9fono","labelPlacement","stacked","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Direcci\xF3n","name","direccion","label","Direcci\xF3n","labelPlacement","stacked","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Ciudad","name","ciudad","label","Ciudad","labelPlacement","stacked","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","C\xF3digo postal","name","codigoPostal","label","C\xF3digo postal","labelPlacement","stacked","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Pa\xEDs","name","pais","label","Pa\xEDs","labelPlacement","stacked","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"boton-a\xF1adir"],["expand","block",1,"boton-cancelar",3,"click"]],template:function(t,e){if(t&1){let d=w();o(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),_(3,"A\xF1adir cliente"),r()()(),o(4,"ion-content",2)(5,"div",3)(6,"form",4,0),f("ngSubmit",function(){return a(d),l(e.addCliente())}),o(8,"ion-item")(9,"ion-input",5),c("ngModelChange",function(i){return a(d),g(e.nombre,i)||(e.nombre=i),l(i)}),r()(),o(10,"ion-item")(11,"ion-input",6),c("ngModelChange",function(i){return a(d),g(e.apellidos,i)||(e.apellidos=i),l(i)}),r()(),o(12,"ion-item")(13,"ion-input",7),c("ngModelChange",function(i){return a(d),g(e.nif,i)||(e.nif=i),l(i)}),r()(),o(14,"ion-item")(15,"ion-input",8),c("ngModelChange",function(i){return a(d),g(e.email,i)||(e.email=i),l(i)}),f("ionInput",function(){return a(d),l(e.validateEmail())}),r()(),o(16,"ion-item")(17,"ion-input",9),c("ngModelChange",function(i){return a(d),g(e.telefono,i)||(e.telefono=i),l(i)}),r()(),o(18,"ion-item")(19,"ion-input",10),c("ngModelChange",function(i){return a(d),g(e.direccion,i)||(e.direccion=i),l(i)}),r()(),o(20,"ion-item")(21,"ion-input",11),c("ngModelChange",function(i){return a(d),g(e.ciudad,i)||(e.ciudad=i),l(i)}),r()(),o(22,"ion-item")(23,"ion-input",12),c("ngModelChange",function(i){return a(d),g(e.codigoPostal,i)||(e.codigoPostal=i),l(i)}),r()(),o(24,"ion-item")(25,"ion-input",13),c("ngModelChange",function(i){return a(d),g(e.pais,i)||(e.pais=i),l(i)}),r()(),o(26,"ion-button",14),_(27," A\xF1adir cliente "),r(),o(28,"ion-button",15),f("click",function(){return a(d),l(e.cancelar())}),_(29," Cancelar "),r()()()()}t&2&&(P("translucent",!0),n(4),P("fullscreen",!0),n(4),m("invalid",!e.nombre&&e.formSubmitted),n(),p("ngModel",e.nombre),n(),m("invalid",!e.apellidos&&e.formSubmitted),n(),p("ngModel",e.apellidos),n(),m("invalid",!e.nif&&e.formSubmitted),n(),p("ngModel",e.nif),n(),m("invalid",(!e.email||!e.isEmailValid())&&e.formSubmitted),n(),p("ngModel",e.email),n(),m("invalid",!e.telefono&&e.formSubmitted),n(),p("ngModel",e.telefono),n(),m("invalid",!e.direccion&&e.formSubmitted),n(),p("ngModel",e.direccion),n(),m("invalid",!e.ciudad&&e.formSubmitted),n(),p("ngModel",e.ciudad),n(),m("invalid",!e.codigoPostal&&e.formSubmitted),n(),p("ngModel",e.codigoPostal),n(),m("invalid",!e.pais&&e.formSubmitted),n(),p("ngModel",e.pais),n(),m("disabled",e.formInvalid))},dependencies:[B,N,L,O,S,k,E,V,v,A,W,T,Y,z,U,G,J,K,Q,X,H,R,q,F],styles:['@charset "UTF-8";.addCliente[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px;padding-top:20px}.boton-a\\f1 adir[_ngcontent-%COMP%]{padding:20px}.boton-cancelar[_ngcontent-%COMP%]{padding-right:20px;padding-left:20px}.invalid[_ngcontent-%COMP%]{border:2px solid red;--ion-color: red}.error-text[_ngcontent-%COMP%]{color:red;font-size:14px;text-align:center;margin-top:5px}.disabled[_ngcontent-%COMP%]{pointer-events:auto}']});let C=h;return C})();export{me as ClienteAddPage};
