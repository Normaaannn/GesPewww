import{b as x,c as R,e as U,h as G,i as J,j as K,k as Q,l as X,m as Y,n as Z,p as $}from"./chunk-DWTMSAJF.js";import"./chunk-EIUGSWZD.js";import"./chunk-TW6IKH4B.js";import"./chunk-ZWHDOK3R.js";import"./chunk-4PGTP63H.js";import"./chunk-BDVXA75T.js";import"./chunk-HC6MZPB3.js";import"./chunk-I3LG7LOT.js";import"./chunk-FERD25SW.js";import"./chunk-7EU7YSXT.js";import"./chunk-LEIMCQKJ.js";import"./chunk-KKMBB4JE.js";import"./chunk-BZ2JL7UE.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-GZWEEWZ4.js";import"./chunk-MCRJI3T3.js";import"./chunk-MAJNWM2K.js";import"./chunk-5LUBTVRJ.js";import{a as H}from"./chunk-X4PUQNXE.js";import{Aa as N,B as C,Ba as A,C as u,Ca as F,D as n,E as a,Fa as B,Fb as q,Gb as z,Ha as E,J as v,Jb as j,K as g,Nb as D,S as m,U as w,W as h,X as f,Y as b,hb as W,j as d,ja as y,k as l,pb as O,r as o,s as P,sa as S,u as I,ub as k,vb as L,ya as V,za as T}from"./chunk-GOUZPZED.js";import"./chunk-L2GIMNSN.js";import"./chunk-7KGURMOZ.js";import"./chunk-YZINE4VV.js";import"./chunk-OITPVWB3.js";import"./chunk-YXCBSPVC.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-ETCIABSX.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as M}from"./chunk-RW4GY4BD.js";var me=(()=>{let p=class p{constructor(r,i){this.router=r,this.toastController=i,this.nombre="",this.descripcion="",this.precioNeto="",this.iva="",this.precioBruto=0,this.formSubmitted=!1}ngOnInit(){}get formInvalid(){return!this.nombre||!this.descripcion||!this.precioNeto||!this.iva}addProducto(){if(this.formSubmitted=!0,this.formInvalid)return;let r=localStorage.getItem("accessToken");if(!r){console.log("No se encontr\xF3 el token de acceso");return}let i=H.apiUrl+"/producto";fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({nombre:this.nombre,descripcion:this.descripcion,precioNeto:this.precioNeto,iva:this.iva})}).then(e=>e.text()).then(e=>{e.trim()==="Producto a\xF1adido"?this.router.navigate(["/productos"]):this.presentToast("Error en el registro: "+e)}).catch(e=>{console.error("Error en la solicitud:",e),alert("Error en la solicitud")})}cancelar(){this.router.navigate(["/productos"])}actualizarPrecioBruto(){let r=parseFloat(this.precioNeto)||0,i=parseFloat(this.iva)||0;this.precioBruto=parseFloat((r*(1+i/100)).toFixed(2))}presentToast(r){return M(this,null,function*(){yield(yield this.toastController.create({message:r,duration:2e3,position:"top"})).present()})}};p.\u0275fac=function(i){return new(i||p)(P(S),P(j))},p.\u0275cmp=I({type:p,selectors:[["app-producto-add"]],decls:25,vars:17,consts:[["clienteForm","ngForm"],[3,"translucent"],[3,"fullscreen"],[1,"centrar"],[1,"addProducto",3,"ngSubmit"],["type","text","placeholder","Nombre","name","nombre","label","Nombre","labelPlacement","floating","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Descripci\xF3n","name","descripcion","label","Descripci\xF3n","labelPlacement","floating","required","",3,"ngModelChange","ngModel"],["type","number","placeholder","Precio neto","name","precioNeto","label","Precio neto","labelPlacement","floating","required","",3,"ngModelChange","ngModel"],["type","number","placeholder","I.V.A.","name","iva","label","I.V.A.","labelPlacement","floating","required","",3,"ngModelChange","ngModel"],["position","stacked"],[1,"precio-bruto"],["expand","block","type","submit",1,"boton-a\xF1adir"],["expand","block",1,"boton-cancelar",3,"click"]],template:function(i,e){if(i&1){let s=v();n(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),m(3,"A\xF1adir producto"),a()()(),n(4,"ion-content",2)(5,"div",3)(6,"form",4,0),g("ngSubmit",function(){return d(s),l(e.addProducto())}),n(8,"ion-item")(9,"ion-input",5),b("ngModelChange",function(t){return d(s),f(e.nombre,t)||(e.nombre=t),l(t)}),a()(),n(10,"ion-item")(11,"ion-input",6),b("ngModelChange",function(t){return d(s),f(e.descripcion,t)||(e.descripcion=t),l(t)}),a()(),n(12,"ion-item")(13,"ion-input",7),b("ngModelChange",function(t){return d(s),f(e.precioNeto,t)||(e.precioNeto=t),l(t)}),g("ngModelChange",function(){return d(s),l(e.actualizarPrecioBruto())}),a()(),n(14,"ion-item")(15,"ion-input",8),b("ngModelChange",function(t){return d(s),f(e.iva,t)||(e.iva=t),l(t)}),g("ngModelChange",function(){return d(s),l(e.actualizarPrecioBruto())}),a()(),n(16,"ion-item")(17,"ion-label",9),m(18,"Precio Bruto"),a(),n(19,"div",10),m(20),a()(),n(21,"ion-button",11),m(22," A\xF1adir producto "),a(),n(23,"ion-button",12),g("click",function(){return d(s),l(e.cancelar())}),m(24," Cancelar "),a()()()()}i&2&&(C("translucent",!0),o(4),C("fullscreen",!0),o(4),u("invalid",!e.nombre&&e.formSubmitted),o(),h("ngModel",e.nombre),o(),u("invalid",!e.descripcion&&e.formSubmitted),o(),h("ngModel",e.descripcion),o(),u("invalid",!e.precioNeto&&e.formSubmitted),o(),h("ngModel",e.precioNeto),o(),u("invalid",!e.iva&&e.formSubmitted),o(),h("ngModel",e.iva),o(5),w("",e.precioBruto," \u20AC"),o(),u("disabled",e.formInvalid))},dependencies:[O,k,q,z,y,E,F,V,T,B,A,N,$,U,G,J,K,Q,X,Y,Z,x,R,D,L,W],styles:['@charset "UTF-8";.addProducto[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px;padding-top:20px}.boton-a\\f1 adir[_ngcontent-%COMP%]{padding:20px}.boton-cancelar[_ngcontent-%COMP%]{padding-right:20px;padding-left:20px}.invalid[_ngcontent-%COMP%]{border:2px solid red;--ion-color: red}.error-text[_ngcontent-%COMP%]{color:red;font-size:14px;text-align:center;margin-top:5px}.disabled[_ngcontent-%COMP%]{pointer-events:auto}.precio-bruto[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px}']});let _=p;return _})();export{me as ProductoAddPage};
