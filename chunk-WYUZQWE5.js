import{c as A,e as D,h as G,i as U,j as x,k as J,m as K,n as Q,p as X}from"./chunk-QA2ZZ3BP.js";import"./chunk-EIUGSWZD.js";import"./chunk-TW6IKH4B.js";import"./chunk-ZWHDOK3R.js";import"./chunk-4PGTP63H.js";import"./chunk-BDVXA75T.js";import"./chunk-HC6MZPB3.js";import"./chunk-I3LG7LOT.js";import"./chunk-FERD25SW.js";import"./chunk-7EU7YSXT.js";import"./chunk-LEIMCQKJ.js";import"./chunk-KKMBB4JE.js";import"./chunk-BZ2JL7UE.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-GZWEEWZ4.js";import"./chunk-MCRJI3T3.js";import"./chunk-MAJNWM2K.js";import"./chunk-5LUBTVRJ.js";import{a as z}from"./chunk-GGPG3CNO.js";import{Aa as v,B as I,Ba as T,C as g,Ca as E,D as n,Da as R,E as r,Ga as W,Hb as k,Ia as O,Ib as q,J as y,K as w,Lb as H,Pb as j,S as u,X as c,Y as f,Z as h,ib as F,j as a,k as s,ka as b,qb as L,r as o,s as C,ta as S,u as M,vb as N,wb as B,za as V}from"./chunk-WQB6777H.js";import"./chunk-L2GIMNSN.js";import"./chunk-7KGURMOZ.js";import"./chunk-YZINE4VV.js";import"./chunk-OITPVWB3.js";import"./chunk-YXCBSPVC.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-ETCIABSX.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as P}from"./chunk-RW4GY4BD.js";var me=(()=>{let m=class m{constructor(t,l){this.router=t,this.toastController=l,this.username="",this.email="",this.password="",this.confirmPassword="",this.formSubmitted=!1,this.emailValid=!1}ngOnInit(){console.log("RegisterPage cargada")}isEmailValid(){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)}validateEmail(){this.emailValid=this.isEmailValid()}get formInvalid(){return!this.username||!this.email||!this.password||!this.confirmPassword||!this.emailValid}register(){if(this.formSubmitted=!0,!this.formInvalid){if(this.password!==this.confirmPassword){this.presentToast("Las contrase\xF1as no coinciden");return}console.log(this.password),fetch(z.apiUrl+"/usuario/register",{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"},body:JSON.stringify({username:this.username,email:this.email,passwordHash:this.password})}).then(t=>t.text()).then(t=>{t.trim()==="Registro completado"?(this.presentToast("Usuario registrado correctamente"),this.router.navigate(["/login"])):this.presentToast(t)}).catch(t=>{console.error("Error en la solicitud:",t),alert("Error en la solicitud")})}}goToLogin(){this.router.navigate(["/login"])}presentToast(t){return P(this,null,function*(){yield(yield this.toastController.create({message:t,duration:2e3,position:"top"})).present()})}};m.\u0275fac=function(l){return new(l||m)(C(S),C(H))},m.\u0275cmp=M({type:m,selectors:[["app-registro"]],decls:22,vars:16,consts:[["registerForm","ngForm"],[3,"translucent"],[3,"fullscreen"],[1,"centrar"],[2,"font-size","50px","padding","15px"],[1,"register",3,"ngSubmit"],["type","text","placeholder","Nombre de usuario","name","username","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Correo electr\xF3nico","name","email","required","",3,"ngModelChange","ionInput","ngModel"],["type","password","placeholder","Contrase\xF1a","name","password","required","",3,"ngModelChange","ngModel"],["type","password","placeholder","Confirmar contrase\xF1a","name","confirmPassword","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"boton-login"],["expand","block",1,"boton-registro",3,"click"]],template:function(l,e){if(l&1){let d=y();n(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),u(3,"GesPe"),r()()(),n(4,"ion-content",2)(5,"div",3)(6,"h1",4),u(7,"Registro"),r(),n(8,"form",5,0),w("ngSubmit",function(){return a(d),s(e.register())}),n(10,"ion-item")(11,"ion-input",6),h("ngModelChange",function(i){return a(d),f(e.username,i)||(e.username=i),s(i)}),r()(),n(12,"ion-item")(13,"ion-input",7),h("ngModelChange",function(i){return a(d),f(e.email,i)||(e.email=i),s(i)}),w("ionInput",function(){return a(d),s(e.validateEmail())}),r()(),n(14,"ion-item")(15,"ion-input",8),h("ngModelChange",function(i){return a(d),f(e.password,i)||(e.password=i),s(i)}),r()(),n(16,"ion-item")(17,"ion-input",9),h("ngModelChange",function(i){return a(d),f(e.confirmPassword,i)||(e.confirmPassword=i),s(i)}),r()(),n(18,"ion-button",10),u(19," Registrarse "),r(),n(20,"ion-button",11),w("click",function(){return a(d),s(e.goToLogin())}),u(21," Cancelar "),r()()()()}l&2&&(I("translucent",!0),o(4),I("fullscreen",!0),o(6),g("invalid",!e.username&&e.formSubmitted),o(),c("ngModel",e.username),o(),g("invalid",(!e.email||!e.isEmailValid())&&e.formSubmitted),o(),c("ngModel",e.email),o(),g("invalid",!e.password&&e.formSubmitted),o(),c("ngModel",e.password),o(),g("invalid",!e.confirmPassword&&e.formSubmitted),o(),c("ngModel",e.confirmPassword),o(),g("disabled",e.formInvalid))},dependencies:[L,N,k,q,b,O,R,V,v,W,E,T,X,D,G,U,x,J,K,Q,A,j,B,F],styles:[".register[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.boton-login[_ngcontent-%COMP%]{padding:20px}.boton-registro[_ngcontent-%COMP%]{padding-right:20px;padding-left:20px}.invalid[_ngcontent-%COMP%]{border:2px solid red;--ion-color: red}.error-text[_ngcontent-%COMP%]{color:red;font-size:14px;text-align:center;margin-top:5px}.disabled[_ngcontent-%COMP%]{pointer-events:auto}"]});let _=m;return _})();export{me as RegistroPage};
