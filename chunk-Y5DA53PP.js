import{c as A,e as D,h as G,i as U,j as J,k as K,m as Q,n as X,p as Y}from"./chunk-T5ABTVR2.js";import"./chunk-EIUGSWZD.js";import"./chunk-TW6IKH4B.js";import"./chunk-ZWHDOK3R.js";import"./chunk-4PGTP63H.js";import"./chunk-BDVXA75T.js";import"./chunk-HC6MZPB3.js";import"./chunk-I3LG7LOT.js";import"./chunk-FERD25SW.js";import"./chunk-7EU7YSXT.js";import"./chunk-LEIMCQKJ.js";import"./chunk-KKMBB4JE.js";import"./chunk-BZ2JL7UE.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-GZWEEWZ4.js";import"./chunk-MCRJI3T3.js";import"./chunk-MAJNWM2K.js";import"./chunk-5LUBTVRJ.js";import{a as z}from"./chunk-GGPG3CNO.js";import{B as I,Ba as V,C as p,Ca as v,D as o,Da as T,E as r,Ea as E,Fa as R,Ia as W,J as y,Ja as L,K as w,Kb as k,La as O,Lb as q,Ob as H,S as u,Sb as j,X as c,Y as h,Z as f,j as a,k as s,la as b,lb as F,r as n,s as C,tb as N,u as P,ua as S,yb as x,zb as B}from"./chunk-37LTOCVS.js";import"./chunk-L2GIMNSN.js";import"./chunk-7KGURMOZ.js";import"./chunk-YZINE4VV.js";import"./chunk-OITPVWB3.js";import"./chunk-YXCBSPVC.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-ETCIABSX.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as M}from"./chunk-RW4GY4BD.js";var ge=(()=>{let m=class m{constructor(t,l){this.router=t,this.toastController=l,this.username="",this.email="",this.password="",this.confirmPassword="",this.formSubmitted=!1,this.emailValid=!1}ngOnInit(){console.log("RegisterPage cargada")}isEmailValid(){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)}validateEmail(){this.emailValid=this.isEmailValid()}get formInvalid(){return!this.username||!this.email||!this.password||!this.confirmPassword||!this.emailValid}register(){if(this.formSubmitted=!0,!this.formInvalid){if(this.password!==this.confirmPassword){this.presentToast("Las contrase\xF1as no coinciden");return}console.log(this.password),fetch(z.apiUrl+"/usuario/register",{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"},body:JSON.stringify({username:this.username,email:this.email,passwordHash:this.password})}).then(t=>t.text()).then(t=>{t.trim()==="Registro completado"?(this.presentToast("Usuario registrado correctamente"),this.router.navigate(["/login"])):this.presentToast(t)}).catch(t=>{console.error("Error en la solicitud:",t),alert("Error en la solicitud")})}}goToLogin(){this.router.navigate(["/login"])}presentToast(t){return M(this,null,function*(){yield(yield this.toastController.create({message:t,duration:2e3,position:"top",cssClass:"toast"})).present()})}};m.\u0275fac=function(l){return new(l||m)(C(S),C(H))},m.\u0275cmp=P({type:m,selectors:[["app-registro"]],decls:22,vars:16,consts:[["registerForm","ngForm"],[3,"translucent"],[3,"fullscreen"],[1,"centrar"],[2,"font-size","50px","padding","15px"],[1,"register",3,"ngSubmit"],["type","text","placeholder","Nombre de usuario","name","username","maxlength","25","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Correo electr\xF3nico","name","email","maxlength","60","required","",3,"ngModelChange","ionInput","ngModel"],["type","password","placeholder","Contrase\xF1a","name","password","maxlength","50","required","",3,"ngModelChange","ngModel"],["type","password","placeholder","Confirmar contrase\xF1a","name","confirmPassword","maxlength","50","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"boton-login"],["expand","block",1,"boton-registro",3,"click"]],template:function(l,e){if(l&1){let d=y();o(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),u(3,"GesPe"),r()()(),o(4,"ion-content",2)(5,"div",3)(6,"h1",4),u(7,"Registro"),r(),o(8,"form",5,0),w("ngSubmit",function(){return a(d),s(e.register())}),o(10,"ion-item")(11,"ion-input",6),f("ngModelChange",function(i){return a(d),h(e.username,i)||(e.username=i),s(i)}),r()(),o(12,"ion-item")(13,"ion-input",7),f("ngModelChange",function(i){return a(d),h(e.email,i)||(e.email=i),s(i)}),w("ionInput",function(){return a(d),s(e.validateEmail())}),r()(),o(14,"ion-item")(15,"ion-input",8),f("ngModelChange",function(i){return a(d),h(e.password,i)||(e.password=i),s(i)}),r()(),o(16,"ion-item")(17,"ion-input",9),f("ngModelChange",function(i){return a(d),h(e.confirmPassword,i)||(e.confirmPassword=i),s(i)}),r()(),o(18,"ion-button",10),u(19," Registrarse "),r(),o(20,"ion-button",11),w("click",function(){return a(d),s(e.goToLogin())}),u(21," Cancelar "),r()()()()}l&2&&(I("translucent",!0),n(4),I("fullscreen",!0),n(6),p("invalid",!e.username&&e.formSubmitted),n(),c("ngModel",e.username),n(),p("invalid",(!e.email||!e.isEmailValid())&&e.formSubmitted),n(),c("ngModel",e.email),n(),p("invalid",!e.password&&e.formSubmitted),n(),c("ngModel",e.password),n(),p("invalid",!e.confirmPassword&&e.formSubmitted),n(),c("ngModel",e.confirmPassword),n(),p("disabled",e.formInvalid))},dependencies:[N,x,k,q,b,O,R,V,v,W,L,E,T,Y,D,G,U,J,K,Q,X,A,j,B,F],styles:[".register[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.boton-login[_ngcontent-%COMP%]{padding:20px}.boton-registro[_ngcontent-%COMP%]{padding-right:20px;padding-left:20px}.invalid[_ngcontent-%COMP%]{border:2px solid red;--ion-color: red}.error-text[_ngcontent-%COMP%]{color:red;font-size:14px;text-align:center;margin-top:5px}.disabled[_ngcontent-%COMP%]{pointer-events:auto}"]});let _=m;return _})();export{ge as RegistroPage};
