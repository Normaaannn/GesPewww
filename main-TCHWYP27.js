import{a as ie}from"./chunk-GGPG3CNO.js";import{D as G,E as V,F as z,Ja as re,Kb as se,_a as ne,ab as oe,e as M,g as q,gb as ae,ma as J,na as _,oa as Q,pa as X,s as K,sa as Y,ta as Z,u as W,ua as N,va as ee,wa as te}from"./chunk-WQB6777H.js";import"./chunk-L2GIMNSN.js";import"./chunk-7KGURMOZ.js";import"./chunk-YZINE4VV.js";import"./chunk-OITPVWB3.js";import"./chunk-YXCBSPVC.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-ETCIABSX.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as s}from"./chunk-RW4GY4BD.js";var u=(()=>{let e=class e{constructor(a){this.router=a}canActivate(a,n){let o=localStorage.getItem("accessToken");return o&&!this.isTokenExpired(o)?Promise.resolve(!0):this.tryRefreshToken().then(i=>i?!0:(this.router.navigate(["/login"]),!1))}isTokenExpired(a){try{let n=JSON.parse(atob(a.split(".")[1]));return new Date(n.exp*1e3)<=new Date}catch{return!0}}tryRefreshToken(){return s(this,null,function*(){let a=localStorage.getItem("refreshToken");if(!a)return!1;try{let n=yield fetch(ie.apiUrl+"/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:a})});if(!n.ok)return!1;let o=yield n.json();return localStorage.setItem("accessToken",o.accessToken),!0}catch{return!1}})}};e.\u0275fac=function(n){return new(n||e)(q(Z))},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ce=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-A7V4DPUL.js").then(t=>t.LoginPage)},{path:"home",canActivate:[u],loadComponent:()=>import("./chunk-JC2K4K4L.js").then(t=>t.HomePage)},{path:"pedidos",canActivate:[u],loadComponent:()=>import("./chunk-QL4AMUL6.js").then(t=>t.HomePage)},{path:"registro",loadComponent:()=>import("./chunk-WYUZQWE5.js").then(t=>t.RegistroPage)},{path:"pedido-detalle",canActivate:[u],loadComponent:()=>import("./chunk-FPHWXICU.js").then(t=>t.PedidoDetallePage)},{path:"clientes",canActivate:[u],loadComponent:()=>import("./chunk-HKYP66CC.js").then(t=>t.ClientesPage)},{path:"productos",canActivate:[u],loadComponent:()=>import("./chunk-CWMYTFIP.js").then(t=>t.ProductosPage)},{path:"cliente-detalle",canActivate:[u],loadComponent:()=>import("./chunk-IWY5IZAJ.js").then(t=>t.ClienteDetallePage)},{path:"producto-detalle",canActivate:[u],loadComponent:()=>import("./chunk-RDOUZCRQ.js").then(t=>t.ProductoDetallePage)},{path:"pedido-add",canActivate:[u],loadComponent:()=>import("./chunk-GMOOY3X3.js").then(t=>t.PedidoAddPage)},{path:"cliente-add",canActivate:[u],loadComponent:()=>import("./chunk-I6MQ7KSZ.js").then(t=>t.ClienteAddPage)},{path:"producto-add",canActivate:[u],loadComponent:()=>import("./chunk-WUQYWUQ4.js").then(t=>t.ProductoAddPage)},{path:"ajustes",canActivate:[u],loadComponent:()=>import("./chunk-PJZSO5GK.js").then(t=>t.AjustesPage)},{path:"cambiar-password",canActivate:[u],loadComponent:()=>import("./chunk-E4YRROHK.js").then(t=>t.CambiarPasswordPage)},{path:"usuarios",canActivate:[u],loadComponent:()=>import("./chunk-FC3OT76Q.js").then(t=>t.UsuariosPage)},{path:"usuario-detalle",canActivate:[u],loadComponent:()=>import("./chunk-MA65VJ3H.js").then(t=>t.UsuarioDetallePage)},{path:"info-empresa",canActivate:[u],loadComponent:()=>import("./chunk-BEVVA7N5.js").then(t=>t.InfoEmpresaPage)},{path:"recover-password",loadComponent:()=>import("./chunk-PCCTGA6F.js").then(t=>t.RecoverPasswordPage)},{path:"reset-password",loadComponent:()=>import("./chunk-R2W66CD3.js").then(t=>t.ResetPasswordPage)},{path:"cambiar-avatar",canActivate:[u],loadComponent:()=>import("./chunk-LCZ3PIBI.js").then(t=>t.CambiarAvatarPage)},{path:"cambiar-logo-empresa",loadComponent:()=>import("./chunk-GPSETHFM.js").then(t=>t.CambiarLogoEmpresaPage)}];var L=function(t){return t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE",t}(L||{}),A=class extends Error{constructor(e,r,a){super(e),this.message=e,this.code=r,this.data=a}},ge=t=>{var e,r;return t!=null&&t.androidBridge?"android":!((r=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},we=t=>{let e=t.CapacitorCustomPlatform||null,r=t.Capacitor||{},a=r.Plugins=r.Plugins||{},n=()=>e!==null?e.name:ge(t),o=()=>n()!=="web",i=c=>{let d=w.get(c);return!!(d!=null&&d.platforms.has(n())||l(c))},l=c=>{var d;return(d=r.PluginHeaders)===null||d===void 0?void 0:d.find(k=>k.name===c)},m=c=>t.console.error(c),w=new Map,E=(c,d={})=>{let k=w.get(c);if(k)return console.warn(`Capacitor plugin "${c}" already registered. Cannot register plugins twice.`),k.proxy;let P=n(),C=l(c),v,pe=()=>s(void 0,null,function*(){return!v&&P in d?v=typeof d[P]=="function"?v=yield d[P]():v=d[P]:e!==null&&!v&&"web"in d&&(v=typeof d.web=="function"?v=yield d.web():v=d.web),v}),me=(p,h)=>{var g,y;if(C){let b=C==null?void 0:C.methods.find(f=>h===f.name);if(b)return b.rtype==="promise"?f=>r.nativePromise(c,h.toString(),f):(f,x)=>r.nativeCallback(c,h.toString(),f,x);if(p)return(g=p[h])===null||g===void 0?void 0:g.bind(p)}else{if(p)return(y=p[h])===null||y===void 0?void 0:y.bind(p);throw new A(`"${c}" plugin is not implemented on ${P}`,L.Unimplemented)}},T=p=>{let h,g=(...y)=>{let b=pe().then(f=>{let x=me(f,p);if(x){let O=x(...y);return h=O==null?void 0:O.remove,O}else throw new A(`"${c}.${p}()" is not implemented on ${P}`,L.Unimplemented)});return p==="addListener"&&(b.remove=()=>s(void 0,null,function*(){return h()})),b};return g.toString=()=>`${p.toString()}() { [capacitor code] }`,Object.defineProperty(g,"name",{value:p,writable:!1,configurable:!1}),g},H=T("addListener"),B=T("removeListener"),he=(p,h)=>{let g=H({eventName:p},h),y=()=>s(void 0,null,function*(){let f=yield g;B({eventName:p,callbackId:f},h)}),b=new Promise(f=>g.then(()=>f({remove:y})));return b.remove=()=>s(void 0,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield y()}),b},D=new Proxy({},{get(p,h){switch(h){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?he:H;case"removeListener":return B;default:return T(h)}}});return a[c]=D,w.set(c,{name:c,proxy:D,platforms:new Set([...Object.keys(d),...C?[P]:[]])}),D};return r.convertFileSrc||(r.convertFileSrc=c=>c),r.getPlatform=n,r.handleError=m,r.isNativePlatform=o,r.isPluginAvailable=i,r.registerPlugin=E,r.Exception=A,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},ve=t=>t.Capacitor=we(t),U=ve(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),j=U.registerPlugin,S=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,r){let a=!1;this.listeners[e]||(this.listeners[e]=[],a=!0),this.listeners[e].push(r);let o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),a&&this.sendRetainedArgumentsForEvent(e);let i=()=>s(this,null,function*(){return this.removeListener(e,r)});return Promise.resolve({remove:i})}removeAllListeners(){return s(this,null,function*(){this.listeners={};for(let e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}})}notifyListeners(e,r,a){let n=this.listeners[e];if(!n){if(a){let o=this.retainedEventArguments[e];o||(o=[]),o.push(r),this.retainedEventArguments[e]=o}return}n.forEach(o=>o(r))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,r){this.windowListeners[r]={registered:!1,windowEventName:e,pluginEventName:r,handler:a=>{this.notifyListeners(r,a)}}}unimplemented(e="not implemented"){return new U.Exception(e,L.Unimplemented)}unavailable(e="not available"){return new U.Exception(e,L.Unavailable)}removeListener(e,r){return s(this,null,function*(){let a=this.listeners[e];if(!a)return;let n=a.indexOf(r);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])})}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){let r=this.retainedEventArguments[e];r&&(delete this.retainedEventArguments[e],r.forEach(a=>{this.notifyListeners(e,a)}))}};var de=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),le=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),$=class extends S{getCookies(){return s(this,null,function*(){let e=document.cookie,r={};return e.split(";").forEach(a=>{if(a.length<=0)return;let[n,o]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=le(n).trim(),o=le(o).trim(),r[n]=o}),r})}setCookie(e){return s(this,null,function*(){try{let r=de(e.key),a=de(e.value),n=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),i=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${r}=${a||""}${n}; path=${o}; ${i};`}catch(r){return Promise.reject(r)}})}deleteCookie(e){return s(this,null,function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}})}clearCookies(){return s(this,null,function*(){try{let e=document.cookie.split(";")||[];for(let r of e)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})}clearAllCookies(){return s(this,null,function*(){try{yield this.clearCookies()}catch(e){return Promise.reject(e)}})}},Se=j("CapacitorCookies",{web:()=>new $}),ye=t=>s(void 0,null,function*(){return new Promise((e,r)=>{let a=new FileReader;a.onload=()=>{let n=a.result;e(n.indexOf(",")>=0?n.split(",")[1]:n)},a.onerror=n=>r(n),a.readAsDataURL(t)})}),be=(t={})=>{let e=Object.keys(t);return Object.keys(t).map(n=>n.toLocaleLowerCase()).reduce((n,o,i)=>(n[o]=t[e[i]],n),{})},Pe=(t,e=!0)=>t?Object.entries(t).reduce((a,n)=>{let[o,i]=n,l,m;return Array.isArray(i)?(m="",i.forEach(w=>{l=e?encodeURIComponent(w):w,m+=`${o}=${l}&`}),m.slice(0,-1)):(l=e?encodeURIComponent(i):i,m=`${o}=${l}`),`${a}&${m}`},"").substr(1):null,Ce=(t,e={})=>{let r=Object.assign({method:t.method||"GET",headers:t.headers},e),n=be(t.headers)["content-type"]||"";if(typeof t.data=="string")r.body=t.data;else if(n.includes("application/x-www-form-urlencoded")){let o=new URLSearchParams;for(let[i,l]of Object.entries(t.data||{}))o.set(i,l);r.body=o.toString()}else if(n.includes("multipart/form-data")||t.data instanceof FormData){let o=new FormData;if(t.data instanceof FormData)t.data.forEach((l,m)=>{o.append(m,l)});else for(let l of Object.keys(t.data))o.append(l,t.data[l]);r.body=o;let i=new Headers(r.headers);i.delete("content-type"),r.headers=i}else(n.includes("application/json")||typeof t.data=="object")&&(r.body=JSON.stringify(t.data));return r},R=class extends S{request(e){return s(this,null,function*(){let r=Ce(e,e.webFetchExtra),a=Pe(e.params,e.shouldEncodeUrlParams),n=a?`${e.url}?${a}`:e.url,o=yield fetch(n,r),i=o.headers.get("content-type")||"",{responseType:l="text"}=o.ok?e:{};i.includes("application/json")&&(l="json");let m,w;switch(l){case"arraybuffer":case"blob":w=yield o.blob(),m=yield ye(w);break;case"json":m=yield o.json();break;case"document":case"text":default:m=yield o.text()}let E={};return o.headers.forEach((c,d)=>{E[d]=c}),{data:m,headers:E,status:o.status,url:o.url}})}get(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))})}post(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))})}put(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))})}patch(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})}delete(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})}},je=j("CapacitorHttp",{web:()=>new R});var I=function(t){return t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT",t}(I||{});var F=j("StatusBar");var ue=(()=>{let e=class e{constructor(a){this.platform=a}initializeApp(){this.platform.ready().then(()=>{F.setOverlaysWebView({overlay:!1}),F.setStyle({style:I.Dark})})}};e.\u0275fac=function(n){return new(n||e)(K(re))},e.\u0275cmp=W({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(n,o){n&1&&(G(0,"ion-app"),z(1,"ion-router-outlet"),V())},dependencies:[ae,oe],encapsulation:2});let t=e;return t})();X(ue,{providers:[{provide:Y,useClass:ne},se(),ee(ce,te(N)),J(Q(),_([]))]});
